---
icon: edit
title: 实用工具汇总
date: 2023-08-31
category:
  - summary
tag:
  - 心得
---
# 实用工具汇总

## 文件压缩

### PDF压缩：

[在线压缩PDF文件。保持与原PDF文件同等的质量，但尺寸比原文件小 (ilovepdf.com)](https://www.ilovepdf.com/zh-cn/compress_pdf)

### 图片压缩：

[TinyPNG – 智能压缩您的WebP、JPEG和PNG图片](https://tinypng.com/cn/)
:::tip 也可以通过python调用API实现↓↓↓
:::

:::details python调用API

```python
import tinify
import os

# 设置API密钥
tinify.key = "mr2mRhfl0C2FHJFvb4QvRdJ9BMXkj2z5"

# 遍历目录并压缩.jpg格式的图片
directory = r"D:\Users\ArthurFsy\Documents\python脚本\tinyVideo_old"   #输入路径
output_directory = r"D:\Users\ArthurFsy\Documents\python脚本\tinyVideo_new"  #输出路径
total_files = 0  # 总任务数量
completed_files = 0  # 已完成的任务数量

# 计算总任务数量
for root, dirs, files in os.walk(directory):
    for file in files:
        if file.endswith(".jpg") or file.endswith(".PNG") or file.endswith(".png"):
            total_files += 1

# 遍历目录并压缩图片
for root, dirs, files in os.walk(directory):
    for file in files:
        if file.endswith(".jpg") or file.endswith(".PNG") or file.endswith(".png"):
            file_path = os.path.join(root, file)
            # 使用tinify组件来压缩图片大小
            source = tinify.from_file(file_path)
            output_file_path = os.path.join(output_directory, file)  # 输出文件路径
            source.to_file(output_file_path)  # 保存压缩后的图片到输出目录
            completed_files += 1  # 更新已完成的任务数量

            # 显示脚本运行的时间进度百分比
            progress_percentage = (completed_files / total_files) * 100
            print("脚本运行进度：{:.2f}%".format(progress_percentage))
```

:::

### 视频压缩：
:::tip 需要先下载python和ffmpeg
:::

> [win10系统下ffmpeg的安装配置与Python调用 - 代码天地 (codetd.com)](https://www.codetd.com/article/15441361)

:::details python调用ffpmeg

```python
import os
import subprocess

input_directory = r"D:\Users\ArthurFsy\Documents\python脚本\tinyVideo_old"
output_directory = r"D:\Users\ArthurFsy\Documents\python脚本\tinyVideo_new"
file_extensions = ['.mp4', '.MP4', '.MOV']  # 可以根据需要添加其他后缀名

for root, dirs, files in os.walk(input_directory):
    for file in files:
        for extension in file_extensions:
            if file.endswith(extension):
                input_file_path = os.path.join(root, file)
                output_file_path = os.path.join(output_directory, file)
                subprocess.run(['ffmpeg', '-y', '-i', input_file_path, '-c:v', 'libx264', '-profile:v', 'high',  '-crf', '30',output_file_path])
```

:::
